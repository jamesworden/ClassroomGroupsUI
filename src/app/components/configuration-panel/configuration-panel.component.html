<div class="rounded-lg panel shadow-lg p-4 flex flex-col gap-y-4">
  <!-- Toolbar -->
  <div class="flex justify-between min-h-16 flex-wrap gap-y-4">
    <div class="flex flex-col justify-around pr-4 flex-1">
      <div class="flex flex-col">
        <input
          class="text-ellipsis text-2xl m-0 appearance-none bg-transparent rounded border border-transparent hover-border-primary px-2 leading-tight focus:outline-none focus:shadow-outline"
          type="text"
          maxlength="120"
          [(ngModel)]="updatedLabel"
          (change)="updateLabel()"
        />
        <input
          class="text-ellipsis text-sm appearance-none bg-transparent rounded border border-transparent hover-border-primary px-2 leading-tight focus:outline-none focus:shadow-outline"
          type="text"
          maxlength="150"
          [(ngModel)]="updatedDescription"
          (change)="updateDescription()"
          placeholder="Add a description for your configuration"
        />
      </div>
    </div>

    <div class="flex gap-x-4 mt-2">
      <div class="flex flex-col justify-around">
        <div class="flex flex-col">
          <span class="text-sm ml-2">Average Scores</span>
          <div class="flex justify-between">
            <div></div>
            <mat-slide-toggle class="scale-75" [checked]="averageScores">
            </mat-slide-toggle>
          </div>
        </div>
      </div>

      <mat-form-field
        appearance="outline"
        class="w-48"
        subscriptSizing="dynamic"
      >
        <mat-label>{{
          groupingByDivision ? "Number of groups" : "Students per group"
        }}</mat-label>
        <input matInput type="number" [(ngModel)]="groupingValue" />
        <button matSuffix mat-icon-button (click)="toggleGroupingType()">
          <mat-icon
            ><span class="material-symbols-outlined">
              safety_divider
            </span></mat-icon
          >
        </button>
      </mat-form-field>

      <div class="flex gap-x-2">
        <div class="flex flex-col justify-around">
          <button mat-flat-button>Group</button>
        </div>

        <div class="flex flex-col justify-around">
          <button mat-stroked-button>Shuffle</button>
        </div>
      </div>

      <div class="flex">
        <div class="flex flex-col justify-around">
          <button mat-icon-button (click)="openCreateColumnDialog()">
            <mat-icon>add</mat-icon>
          </button>
        </div>

        <div
          class="flex flex-col justify-around"
          [matTooltip]="
            (viewingClassroom()?.configurations?.length ?? 0) <= 1
              ? 'You can\'t delete the last configuration!'
              : ''
          "
        >
          <button
            mat-icon-button
            (click)="openDeleteConfigurationModal()"
            [disabled]="(viewingClassroom()?.configurations?.length ?? 0) <= 1"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Data Grid Header -->
  <div>
    <div
      cdkDropList
      cdkDropListOrientation="horizontal"
      class="bg-white border border-gray-300 flex flex-row rounded-md overflow-hidden"
      (cdkDropListDropped)="drop($event)"
    >
      @for (column of columns; track column.id) {
      <div class="example-box p-2 border-r border-gray-300" cdkDrag>
        <div class="flex justify-between w-full">
          <div class="flex flex-col justify-around">
            <div>{{ fieldIdsToFields()[column.fieldId].label }}</div>
          </div>
          <div>
            <mat-slide-toggle
              class="scale-75"
              (change)="columnToggled($event, column.id)"
              [checked]="column.enabled"
            >
            </mat-slide-toggle>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>
